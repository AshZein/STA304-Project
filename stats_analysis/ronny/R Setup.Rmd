---
title: "Parking Infraction 2008-2024"
author: "Ronny Chen"
date: "2025-11-20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo   = TRUE,
  message = TRUE,
  warning = FALSE
)

library(data.table)
library(ggplot2)
```


```{r load data}
files <- list.files("tickets", pattern = "\\.csv$", full.names = TRUE)

all_years <- rbindlist(lapply(files, function(f) {

  year <- as.integer(gsub("[^0-9]", "", basename(f)))
  message("Processing file: ", f, "   Year detected: ", year)

  # Read both infraction_code and infraction_description
  dt <- fread(f, select = c("infraction_code", "infraction_description"))

  # Count # of tickets by code 
  yearly_summary <- dt[, .N, by = .(infraction_code, infraction_description)]

  yearly_summary[, year := year]

  return(yearly_summary)
}))

# Preview of the first few rows, just to see if it is the desired table
preview_all_years <- head(all_years)
knitr::kable(
  preview_all_years,
  col.names = c("Infraction Code", "Infraction Description", "Ticket Count", "Year"),
  caption = "Sample of Combined Parking Ticket Data"
)
```


