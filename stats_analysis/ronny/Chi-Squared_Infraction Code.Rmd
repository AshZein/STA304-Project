```{r chi-squared using infraction code}
table_code_2008_2024 <- all_years[year %in% c(2008, 2024),
                                  .(N = sum(N)),
                                  by = .(year, infraction_code)]

contingency_code <- dcast(
  table_code_2008_2024,
  infraction_code ~ year,
  value.var = "N",
  fill = 0
)

chisq.test(contingency_code[, -1])
```

```{r}
library(data.table)

tickets_2008 <- fread(
  "tickets/Parking_Tags_Data_2024_with_wards.csv",
  select = c("infraction_code", "infraction_description"),
  nThread = 4
)

tickets_2008[
  grepl("PRIVATE PROPERTY", infraction_description, ignore.case = TRUE),
  unique(.(
    infraction_code,
    infraction_description
  ))
]
```
